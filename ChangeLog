ChangeLog

vanessa_socket
Library to simplify handling of TCP sockets
Copyright (C) 1999-2009  Simon Horman <horms@verge.net.au>
----------------------------------------------------------------------

3rd September 2009
(Simon Horman)

  * 0.0.8
  - Debian: update versioned dependancy on libvanessa-logger-dev to 0.0.8
  - Debian: Don't include GPL and LGPL preamble in Debian changelog
  - Debian: Changes standards version to 3.8.3
  - vanessa_socket_client_src_open(): only look up the src host and port as needed
  - LT_CONFIG_LTDL_DIR appears to be incompatible with libtool 2
  - getaddrinfo: report host and port in error message
  - Build: autogen.sh: Call automake after autoconf so Makefile.in files are generated
  - Build: Don't use AC_CONFIG_AUX_DIR
  - vanessa_socket_client_src_open: enhance getaddrinfo() error handling
  - vanessa_socket_server_bind(): fix listen() error handling
  - vanessa_socket_server_bind(): fix getaddrinfo() error handling
  - Debian: Update changelog timestamp
  - Debian: use debhelper 7
  - Don't track debian/Makefile
  - Debian: Update standards version to 3.8.2
  - Resolve various libtoolize warnings
  - vanessa_socket_client_src_open(): missing variables and memory leak
  - Debian: Update packaging for libvanessa-socket1
  - Increase library interface major number from 0 to 1
  - ipv6: Add IPv6 to changelog
  - ipv6: Report close() errors in vanessa_socket_server_bind()
  - ipv6: Report close() errors in vanessa_socket_server_bind()
  - ipv6: Make return the last action of the loop in vanessa_socket_server_bind()
  - ipv6: Coding style changes in vanessa_socket_server_bind()
  - ipv6: addrinfo leak in vanessa_socket_client_src_open()
  - ipv6: file descriptor leak in vanessa_socket_client_src_open()
  - ipv6: Coding-style update for IPv6 changes
  - ipv6: Add IPv6 support
  - Debian: Update shlibs for 0.0.8
  - Debian: remove stale package files
  - Debian: Use debhelper compat version 4
  - Debian: Don't use ./mkinstalldirs as it may not exist
  - Remove .cvsignore files
  - Bump revision to 0.0.8
  - Debian: Use policy version 3.8.0 instead of 3.7.2
  - Debian: set -e in postinst script for libvanessa-socket0 to fail on any errors
  - Use name instead of nickname
  - Always use email address in copyright notice
  - Update copyright years
  - Debian: Fix typo in description of libvanessa-adt-pipe
  - Debian: Remove spurious dependancy of libvanessa-socket-pipe on libc6-dev
  - Update COPYTING file to the recent text for the LGPL v2.1
  - Update COPYTING file to the recent text for the LGPL v2.1
  - Debian: Don't ignore errors in make rules
  - Debian: libvanessa-socket-dev: Remove dependancy on libc6-dev
  - Debian: Use ${binary:Version} instead of ${Source-Version}
  - Use automake conditional to control building pipe
  - Prune EXTRA_DIST
  - Rename configure.in as configure.ac
  - Remove AC_PROG_RANLIB, is is not needed
  - Use AC_PROG_LIBTOOL instead of AM_PROC_LIBTOOL
  - Remove acconfig.h
  - Removed tag B
  - update tags
  - fewer profanities
  - Update download URLs
  - Convert option processing to use functions instead of macros
  - Update prototype of __vanessa_socket_pipe_dummy_select() to match select()
  - vanessa_socket_pipe() takes pointers to size_t, not pointers to int
  - Exit autogen.sh with the exit value of configure if it fails
  - vanessa_socket_pipe_config.h.in doesn't exist here
  - Prepare for 0.0.8-rc1
  - Use ssize_t instead of int for the byte count returned
  - Debian packaging update: Release vanessa-socket 0.0.7-2
  - Debian Packaging
  - Changelog typo
  - Add vanessa_gethostbyname
  - Fix clearing of NONBLOCK in vanessa_socket_server_acceptv()
  - Add vector versions of bind, accept, connect and close functions
  - Fix vanessa_socket_pipe_read_write so it calls  libvanessa_socket/vanessa_socket.h ChangeLog

22nd February 2007
(Simon Horman)

  * 0.0.8-rc1
  - Report closure failures
  - Add vector variants of bind, accept, connect and close
  - Add vanessa_gethostbyname to debian packaging and .spec
  - Use ssize_t instead of int for the byte count returned
    by vanessa_socket_pipe_read_write_func()
  - Use size_t instead of for the read and write byte count pointers
    passed to vanessa_socket_pipe_func(). Also note that the
    counters may wrap - need a better solution to this.

----------------------------------------------------------------------

22nd March 2004
(Simon Horman)

  * 0.0.7
  - Don't call umask in daemon code in vanessa_socket_daemon_process()
    or vanessa_socket_daemon_inetd_process().
  - Fix vanessa_socket_pipe_read_write so it calls 
    vanessa_socket_pipe_read_write_with the correct number of arguments.
    Perviously caused build errors if used.

----------------------------------------------------------------------

15th December 2003
(Simon Horman)

  * 0.0.6
  - Better logging of faile gethopstbyname() and gethostbyaddr() calls
  - Reset addrlen correctly in vanessa_socket_server_accept()
    Maxim Dounin
  - Set listen() to SOMAXCONN if possible. Maxim Dounin
  - Better logging of errors looking user or group in
    vanessa_socket_daemon_setid()

----------------------------------------------------------------------

6th June 2003
(Simon Horman)

  * 0.0.5
  - No Change


----------------------------------------------------------------------

26th March 2003
(Simon Horman)

  * 0.0.5beta7
  - Compile time check to see if stdio and stderr can be reassigned.
  - Set upper bound of ports to 65535 rather than USHRT_MAX.
    USHRT_MAX doesn't seem to be universal.


----------------------------------------------------------------------

7th February 2003
(Simon Horman)

  * 0.0.5beta4
  - Made vanessa_socket_accept resistant to SIGPIPE. Russell Corker.


----------------------------------------------------------------------

8th January 2003
(Simon Horman)

  * 0.0.5beta2
  - Packaging fixes


----------------------------------------------------------------------

27th December 2002
(Simon Horman)

  * 0.0.5beta1
  - Since the introduction of non-forking code the noconnections
    variable has not been incremented. However, the reaper
    signal handler continues to decrement this value, causing
    a wraparound. This has been resolved, and maximum connection
    tracking now impliclty works with when vanessa_socket_server_accept()
    is in forking mode. Thanks to Chris Stratford for spotting this
    problem.
  - Be sure to close socket on error in vanessa_socket_server_bind_sockaddr_in
  - Use logging convenicence macros provided by libvanessa_logger
    rather than providing our own.
  - Fixed potential infinite recursion problem in
    vanessa_socket_pipe_write_func()
  - Fixed handling of invalid port lookups
  - Support lookup up UCP port names
  - If possible vanessa_socket_daemon_process() opens /dev/console as
    fd 1 and 2. Otherwise /dev/null is opened (which was the previous
    behaviour). These two file descriptors are then linked to
    the file handles stdout and stderr respectivley.
  - Cast parameters to calls to isdigit to int in 
    vanessa_socket_str_is_digit(). Should avoid compiler
    warnings.
  - Fixed bug in zering of addr data structure in
    vanessa_socket_host_port_sockaddr_in() where the size
    to be zeroed was set to the size of a pointer, rather than
    the structure it points to. This caused host lookup problems
    on (at least) FreeBSD. Dounin Maxim <mdounin@rambler-co.ru>
  - Use memset() instead of bzero().
  - Ignore ECONNABORTED for accept(). Maxim Dounin.
  - Treat getsockname() and getpeername() errors as transient.
    Maxim Dounin


----------------------------------------------------------------------

17th May 2002
(Simon Horman)

  * 0.0.4


----------------------------------------------------------------------

11th May 2002
(Simon Horman)

  * 0.0.4beta4
  - ignore EINTR for accept() in vanessa_socket_server_accept().
    This will occur as a child process exits.


----------------------------------------------------------------------

30th April 2002
(Simon Horman)

  * 0.0.4beta3
  - Fix bug in reseting signal hander in vanessa_socket_handler_reaper
  - vanessa_socket_host_port_sockaddr_in provides a more infomative 
    message if conversion of an IP address to binary fails when 
    VANESSA_SOCKET_NO_LOOKUP is set.
  - include errno.h in vanessa_socket_pipe to allow it to compile
    on GNU/Hurd


----------------------------------------------------------------------

24th March 2002
(Simon Horman)

 * 0.0.4beta2
 - Server code doesn't set SIGCHLD handler to vanessa_socket_server_reaper,
   this should be done by the aplication. If a non-forking server is being 
   used, SIGPIPE needs to be set to something, and SIGCHILD is irrelevant.
 - vanessa_socket_server_open() and freinds use 
   vanessa_socket_server_bind() amd vanessa_socket_server_accept()
 

----------------------------------------------------------------------

14th March 2002
(Simon Horman)

 * 0.0.4beta1
 - Added code to detatch from the terminal to become a daemon.
 - include <errno.h> in vanessa_socket_pipe.c.  closes: Debian Bug#108209
 - Fixed minor .spec file errors 
   Scot W. Hetzel <scot@genroco.com> & Simon Horman
 - Added vanessa_socket_server_bind(), vanessa_socket_server_accept()
   and friends
 - Allow select() function to be supplied to  vanessa_socket_pipe().
 - Use system variants of read(), write() and select() by default
   in  vanessa_socket_pipe() and friends.
 

----------------------------------------------------------------------

29th June 2001
(Simon Horman)

 * 0.0.3
 - Allow read() and write() functions to be supplied to 
   vanessa_socket_pipe() and friends.
 - Tidyied up logging
 

----------------------------------------------------------------------

19th April 2001
(Simon Horman)

 * 0.0.2
 - Fixed problem linking so that it is linked against the
   shared libary libvanessa_logger instead of statically linked
 - Fixed some (minor) casting problems when using bind() and
   various popt calls.
 

----------------------------------------------------------------------

5th April 2001
(Simon Horman)

 * 0.0.1
 - Fixed problem with -b under BSD ("Erik R. Leo" <erikl@sover.net>)
 - Fixed problem with client connecting to bizzare address under BSD
   ("Erik R. Leo" <erikl@sover.net>)
 - Added -lresolv and -lvanessa_logger to build to aid compiling
   under solaris (Chris Stratford <Chris.Stratford@uk.uu.net>)
 - Added -lresolv and -lvanessa_logger to build to aid compiling
   under solaris (Chris Stratford <Chris.Stratford@uk.uu.net>)
 - Added timeradd and timersub compatibility for Solaris
   (Chris Stratford <Chris.Stratford@uk.uu.net>)
 - Cleaned up Debian packages
   

----------------------------------------------------------------------

9th January 2000
(Simon Horman)

 * version 0.0.0 
 - Added vanessa_socket_client_src_open() and
   vanessa_socket_client_src_open_in_addr() that enable a conection
   to be openend to a server and optionally have the source port 
   and/or address specified.

